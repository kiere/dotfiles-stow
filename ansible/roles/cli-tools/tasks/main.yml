---
# CLI tools installation
# Supports: Fedora, Ubuntu/Pop!_OS, Arch Linux/CachyOS

- name: Install CLI tools from package manager
  ansible.builtin.package:
    name: "{{ pkg_cli_tools }}"
    state: present
  become: true

# eza - install via cargo on Fedora/Ubuntu (not in repos)
- name: Install eza via cargo (Fedora/Debian)
  ansible.builtin.command:
    cmd: cargo install eza
    creates: "{{ user_home }}/.cargo/bin/eza"
  when: ansible_distribution not in distros_arch
  environment:
    PATH: "{{ ansible_env.PATH }}:{{ user_home }}/.cargo/bin"

# starship - install via curl on Fedora/Ubuntu
- name: Install starship prompt (Fedora/Debian)
  ansible.builtin.shell: |
    curl -sS https://starship.rs/install.sh | sh -s -- -y
  args:
    creates: /usr/local/bin/starship
  become: true
  when: ansible_distribution not in distros_arch

# Arch has starship in official repos (already in pkg_cli_tools)

- name: Display CLI tools installation complete
  ansible.builtin.debug:
    msg: |
      CLI tools installed!

      Add to ~/.bashrc:
        eval "$(zoxide init bash)"
        eval "$(starship init bash)"
